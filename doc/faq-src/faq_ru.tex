\documentclass[a4paper,10pt]{scrartcl}
\usepackage[cp1251]{inputenc}
\usepackage[russian]{babel}
\usepackage{url}
\usepackage[left=3cm,right=3cm,top=2cm,bottom=2cm,nohead]{geometry}
\usepackage[unicode, breaklinks=true, colorlinks=false,pdfborder=0 0 0]{hyperref}
\usepackage[T2A]{fontenc}

\hyphenpenalty=10000
\exhyphenpenalty=10000
\sloppy

%opening
\title{YajHFC FAQ}
\author{}
\date{}
\begin{document}

\maketitle

\tableofcontents

\section{Установка}
\subsection{Где взять программу просмотра факсов для Windows?}

В большинстве случаев Вы можете использовать любую программу, которая может отображать файлы TIFF, хотя некоторые из них факсы с низким разрешением показывают с неправильной (половинной) высотой.

К счастью, все последние версии Windows поставляются с программой, которая делает это корректно:

\begin{description}
\item[Windows 95/98/ME/2000:]
 Вы можете использовать программу Accessories/Imaging.
      Чтобы использовать ее с YajHFC, воспользуйтесь кнопкой ``выбрать файл'' поля \texttt{Командная строка для программы просмотра факсов}
      для поиска \texttt{kodakimg.exe} на Вашем жёстком диске.\\
      Этот файл обычно находится либо в каталоге Windows (Win 98/ME)\\
      \emph{либо} в \verb.Program Files\Windows NT\Accessories\ImageVue. (Win 2k).
       
\item[Windows XP:]
Вы можете использовать встроенный ``Picture and Fax Viewer''.
      Чтобы использовать его, введите следующий текст в поле \texttt{Командная строка для программы просмотра факсов}: \verb#rundll32.exe shimgvw.dll,ImageView_Fullscreen %s#
 \end{description}

      
\subsection{Где взять программу просмотра факсов для Linux/*BSD/... ?}
\texttt{kfax} у меня работает очень хорошо, однако, также как и в Windows, Вы можете использовать любую программу, которая может отображать файлы TIFF, просто поищите в базе пакетов Вашего дистрибутива (однако, xloadimage у меня \emph{не} работает).


\subsection{Какую программу можно использовать для просмотра факсов на Mac OS X?}
Просто введите \verb.open %s. в поле \texttt{Командная строка для программы просмотра факсов}.
Теперь факсы должны открываться в программе по умолчанию.
Спасибо Скотту Гаррису, разобравшемуся с этим.


\subsection{Где взять программу для просмотра документов PostScript?}
\begin{description}
\item[Windows:] Используйте Ghostview с \url{http://www.cs.wisc.edu/~ghost/}
\item[Linux/*BSD/...:] Просто установите один из пакетов Postscript viewer \\
(например \texttt{gv, kghostview, gnome-gv, ...}).
\end{description}

\subsection{Где взять GhostScript?}
\begin{description}
\item[Windows:] Загрузите его с \url{http://www.cs.wisc.edu/~ghost/}
\item[Linux/*BSD/...:] Установите пакет GhostScript для Вашего дистрибутива (в большинстве дистрибутивов этот пакет установлен по умолчанию; если нет: имя пакета обычно начинается с \texttt{ghostscript} или \texttt{gs}).
\end{description}

\subsection{Где взять TIFF2PDF?}
\begin{description}
\item[Windows:] Загрузите его с \url{http://gnuwin32.sourceforge.net/downlinks/tiff.php}\\ Если ссылка не работает, попробуйте \url{http://www.libtiff.org/} или \url{http://gnuwin32.sourceforge.net/packages/tiff.htm}
\item[Linux/*BSD/...:] Установите пакет libtiff для Вашего дистрибутива. Обычно название этого пакета содержит слово \texttt{tiff} (в Debian/Ubuntu он называется \texttt{libtiff-tools} в SUSE \texttt{tiff}).
\end{description}

\section{Использование программы}	

\subsection{Как редактировать титульные листы PostScript?}
Шаблоны титульных листов должны быть в специальном формате PostScript, который использует программа HylaFAX \texttt{faxcover}. Смотрите как создавать/редактировать
такие файлы на страницах: \\
\url{http://www.hylafax.org/HylaFAQ/Q202.html}\\
\url{http://www.hylafax.org/howto/tweaking.html}\\

Кроме того, начиная с YajHFC 0.3.7, Вы можете использовать титульные листы в формате HTML или, при помощи плагина, в формате XSL:FO или ODT (OpenDocument Text).

\subsection{Я создал документ/титульный лист в HTML, но форматирование в YajHFC выглядит неправильно!}

YajHFC использует поддержку HTML встроенную в Java (\texttt{HTMLEditorKit} / \texttt{HTMLDocument}) для преобразования HTML в PostScript. Эта поддержка весьма ограничена, тем более что поддерживается только HTML 3.2.\\
Это значит, что во многих случаях сложное форматирование в YajHFC не будет рендериться корректно.
Чтобы сделать желаемое форматирование, у Вас есть следующие возможности:

\begin{itemize}
 \item С помощью ``метода проб и ошибок'' добейтесь, чтобы форматирование выглядело правильно (кнопка предпросмотра в диалоге отправки показывает форматирование уже преобразованного документа HTML).
 \item Используйте редактор HTML, такой как Ekit (\url{http://www.hexidec.com/ekit.php}), который так же использует поддержку HTML Java, то есть рендерит подобно YajHFC.
 \item Используйте другой формат для титульного листа (такой как XSL:FO или ODT с плагином FOP).
\end{itemize}

\subsection{Какие поля распознаются в титульных листах HTML?}

Следующие ``слова'' заменяются (независимо от регистра) соответствующими значениями при использовании в качестве титульного листа файла HTML:

\begin{center}
\begin{tabular}{|l|l|}
\hline
\bfseries Слово & \bfseries Значение \\
\hline\hline
\ttfamily @@Name@@ & Полное имя получателя \\\hline
\ttfamily @@Company@@ & Компания получателя \\\hline
\ttfamily @@Location@@ & Адрес получателя \\\hline
\ttfamily @@Faxnumber@@ & Номер факса получателя \\\hline
\ttfamily @@Voicenumber@@ & Номер телефона получателя \\\hline
\ttfamily @@FromName@@ & Полное имя отправителя \\\hline
\ttfamily @@FromCompany@@ & Компания отправителя \\\hline
\ttfamily @@FromLocation@@ & Адрес отправителя \\\hline
\ttfamily @@FromFaxnumber@@ & Номер факса отправителя \\\hline
\ttfamily @@FromVoicenumber@@ & Номер телефона отправителя \\\hline
\ttfamily @@FromEMail@@ & e-mail адрес отправителя \\\hline
\ttfamily @@Subject@@ & Тема факса \\\hline
\ttfamily @@Date@@ & Текущая дата \\\hline
\ttfamily @@PageCount@@ & Количество страниц за исключением титульного листа \\\hline
\ttfamily @@Comments@@ & Комментарии к факсу \\\hline
\end{tabular}
\end{center}

Начиная с версии 0.4.0 доступны следующие дополнительные поля (имейте в виду, что \textit{курсивные} поля будут пустыми при повторной отправке факса):
\begin{center}
\begin{tabular}{|l|p{.7\textwidth}|}
\hline
\bfseries Слово & \bfseries Значение \\
\hline\hline
\ttfamily @@Surname@@ & Фамилия получателя (повторно отправленные факсы: такая же как \texttt{@@Name@@}) \\\hline
\ttfamily\itshape @@GivenName@@ & Имя получателя \\\hline
\ttfamily\itshape @@Title@@ & Звание получателя \\\hline
\ttfamily\itshape @@Position@@ & Должность получателя \\\hline
\ttfamily\itshape @@Department@@ & Отдел получателя\\\hline
\ttfamily @@CompanyName@@ & Название компании получателя (без отдела) (повторно отправленные факсы: такое же как \texttt{@@Company@@})\\\hline
\ttfamily\itshape @@Street@@ & Название улицы получателя \\\hline
\ttfamily @@Place@@ & Адрес получателя (без улицы или индекса) (повторно отправленные факсы: такой же как \texttt{@@Location@@})\\\hline
\ttfamily\itshape @@ZIPCode@@ & Почтовый индекс получателя \\\hline
\ttfamily\itshape @@State@@ & Штат получателя\\\hline
\ttfamily\itshape @@Country@@ & Страна получателя\\\hline
\ttfamily\itshape @@EMail@@ & e-mail адрес получателя\\\hline\hline
\ttfamily @@FromSurname@@ & Фамилия отправителя \\\hline
\ttfamily @@FromGivenName@@ & Имя отправителя \\\hline
\ttfamily @@FromTitle@@ & Звание отправителя \\\hline
\ttfamily @@FromPosition@@ & Должность отправителя \\\hline
\ttfamily @@FromDepartment@@ & Отдел отправителя\\\hline
\ttfamily @@FromCompanyName@@ & Название компании отправителя (без отдела)\\\hline
\ttfamily @@FromStreet@@ & Название улицы отправителя \\\hline
\ttfamily @@FromPlace@@ & Адрес отправителя (без улицы или индекса)\\\hline
\ttfamily @@FromZIPCode@@ & Почтовый индекс отправителя \\\hline
\ttfamily @@FromState@@ & Штат отправителя\\\hline
\ttfamily @@FromCountry@@ & Страна отправителя\\\hline
\ttfamily @@FromEMail@@ & e-mail адрес отправителя\\\hline
\end{tabular}
\end{center}

Замена производится на уровне исходного кода, следовательно слова могут не распознаваться, если форматирование меняется внутри слова (например \texttt{@@sub\textit{ject@@}}).

\subsection{Старое диалоговое окно отправки мне нравилось больше. Можно его вернуть?}

Просто откройте окно Настройки и выберите \texttt{Традиционный} ``Стиль окна отправки''.

\subsection{Я хочу получить доступ к телефонному справочнику через JDBC, но YajHFC не может найти драйвер, даже если я указываю правильный путь к классу при вызове java.}

Если Вы используете аргумент командной строки \texttt{-jar}, java игнорирует путь к классу, определённый пользователем.
Таким образом, используйте следующие команды для запуска YajHFC (конечно же заменив \texttt{/path/to/dbdriver.jar} и \texttt{/path/to/yajhfc.jar} реальными путями и именами файлов):
\begin{description}
\item [Linux/Unix:]" "\\
\verb#java -classpath /path/to/dbdriver.jar:/path/to/yajhfc.jar yajhfc.Launcher#
\item [Windows:]""\\
\verb#java -classpath c:\path\to\dbdriver.jar;c:\path\to\yajhfc.jar yajhfc.Launcher#
\end{description}

\subsection{Что можно вводить в качестве значений оператора \texttt{совпадает} в окне настраиваемого фильтра?}

Регулярные выражения. Краткую справку по допустимому синтаксису Вы можете найти здесь:
\url{http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Pattern.html}

Имейте в виду, что регулярные выражения не тоже самое, что шаблоны. 
Например, чтобы получить эффект шаблона \verb.*., Вы должны использовать \verb#.*#, а 
для получения эффекта шаблона \verb#?# вводить \verb#.#

\subsection{Какие аргументы командной строки понимает YajHFC?}

\begin{verbatim}
Использование:
java -jar yajhfc.jar [--help] [--debug] [--admin] [--background|--noclose]
         [--configdir=directory] [--loadplugin=filename] [--logfile=filename]
         [--showtab=0|R|1|S|2|T] [--recipient=...] [--stdin | filename ...]
Описание аргументов:
filename     Одно или более имён файлов PostScript для отправки
--stdin      Читать файл для отправки со стандартного ввода
--recipient  Задает номер телефона получателя факса
             Вы можете указать несколько аргументов для нескольких получателей.
--admin      Запустить в режиме администрирования
--debug      Выводить отладочную информацию
--logfile    Файл для записи отладочной информации
             (если не указан, используется stdout)
--background Если нет уже запущенного процесса, запустить новый процесс
             и завершить (после передачи файла для отправки)
--noclose    Не закрывать YajHFC после отправки факса
--showtab    Устанавливает вкладку, показываемую после запуска. Укажите 0 или R для
             вкладки "Принятые", 1 или S для "Отправленные", 2 или T для "Передача"
--loadplugin Задает jar файл плагина YajHFC для загрузки.
--no-plugins Отключает загрузку плагинов из файла plugin.lst
--configdir  Задает каталог с конфигурацией вместо ~/.yajhfc
--help       Выводит этот текст
\end{verbatim}


\subsection{При попытке просмотреть отправленные факсы я всегда получаю сообщение об ошибке:
   \texttt{File format PCL not supported}, хотя все документы PostScript/PDF.}

Поставьте флажок \texttt{Исправлять ошибку распознавания PCL файлов} в диалоге Настройки и попробуйте снова.

Некоторые версии HylaFAX неправильно сообщают тип файла ``PCL'' для всех документов, 
ассоциированных с заданием. Если поставлен флажок, YajHFC пытается угадать
тип файла если получен тип PCL (обычно это работает очень хорошо).

\subsection{Я часто получаю ошибку при отправке двух или более факсов подряд. Что мне делать?}

Видимо у некоторых версий сервера HylaFAX возникают проблемы, когда в одном сеансе отправляется более одного факса.

Чтобы обойти эту проблему, на вкладке \texttt{Сервер} диалога Настройки, поставьте флажок \texttt{Создавать новый сеанс для каждого действия}.
Если это \emph{не} поможет, пожалуйста пришлите мне a извещение об ошибке.

\subsection{YajHFC под Windows иногда сохраняет свою конфигурацию в \texttt{C:\textbackslash .yajhfc} вместо \texttt{C:\textbackslash Documents and Settings\textbackslash USERNAME\textbackslash .yajhfc}}

По умолчанию YajHFC сохраняет свою конфигурационную информацию в подкаталог \texttt{.yajhfc} каталога, возвращаемого переменной окружения Java \texttt{user.home}.
Иногда некоторые версии Java устанавливают эту переменную неправильно, что приводит к неправильному функционированию описанному выше.

Для устранения проблемы, Вы можете явно установить эту переменную при запуске YajHFC с помощью ключа \texttt{-D} командной строки java, например: \\
\texttt{java -Duser.home=\%USERPROFILE\% -jar "C:\textbackslash Program Files\textbackslash yajhfc.jar"}

\subsection{Что означает колонка XYZ?}

Скорее всего, мне это тоже не известно точно, так как заголовки колонок
просто скопированы из man страницы \verb.faxstat(1). (JobFmt/RcvFmt) и 
сокращены/переведены.

\subsection{Не показывается иконка в трее!}

Иконка в трее будет показываться, только если Вы запускаете YajHFC под Java 1.6 (``Java 6'').
Если Вы используете Java 1.5 (``Java 5''), иконка в трее не поддерживается.

Пожалуйста убедитесь, что у Вас установлена Java 1.6. Если Вы абсолютно уверены, что у Вас установлена Java 1.6 и иконка в трее всё равно не показывается, пожалуйста, пришлите мне a извещение об ошибке.

\subsection{Как можно установить некоторые настройки по умолчанию?}

Начиная с версии 0.4.0 для того, чтобы восстановить сохранённые настройки, загружаются следующие файлы (если они есть):
\begin{enumerate}
 \item \texttt{[Каталог, в котором находится yajhfc.jar]/settings.default}
 \item пользовательские настройки из \texttt{\{user.home\}\footnote{В Windows \texttt{user.home} обычно \texttt{C:\textbackslash Documents and Settings\textbackslash USERNAME}.}/.yajhfc/settings} \\
(если Вы указали \texttt{--configdir=DIR}, будет использоваться \texttt{DIR/settings})
 \item \texttt{[Каталог, в котором находится yajhfc.jar]/settings.override}
\end{enumerate}

Настройки из файлов, загруженных позже, отменяют настройки определённые в файлах, загруженных ранее, т.е. настройки из \texttt{settings.override} имеют преимущественное значение по сравнению с пользовательскими настройками и \texttt{settings.default}.
\medskip

Этот механизм может быть использован для указания настроек по умолчанию (например в сетевой среде): \\
Просто настройте одну установку YajHFC так как Вам нравится, скопируйте файл \\
\texttt{\{user.home\}/.yajhfc/settings} в каталог с \texttt{yajhfc.jar} и переименуйте его в \texttt{settings.default}.
\medskip

Подобным образом можно отменять настройки. В этом случае, Вы можете отредактировать файл настроек (это обычный текстовый файл), и удалить любые строки с настройками, которые Вы не хотите отменять (конечно же Вы захотите удалить по меньшей мере \texttt{user} и \texttt{pass} (имя пользователя и пароль, используемые для соединения с сервером HylaFAX), \texttt{FromName}, \texttt{*ColState} (ширина колонок таблиц), \texttt{*Bounds} (положение различных окон) и \texttt{mainwinLastTab}).

Однако, имейте в виду, что пользователь все ещё может установить другие значения этих настроек для выполняемого экземпляра YajHFC. Они сбросятся к отменяющим значениям только тогда, когда YajHFC запустится снова (т.е. пользователь может установить эти настройки, но они не сохраняться между перезапусками YajHFC).


\section{Прочее}

\subsection{Почему пароли хранятся открытым текстом?}

Скажу просто: потому что нет другого метода, который был бы существенно лучше.

YajHFC мог бы как-нибудь кодировать/``шифровать'' пароли перед сохранением, но если это сделать, 
Вы всегда сможете посмотреть исходный код, чтобы выяснить как их расшифровать 
(даже если бы YajHFC был программным обеспечением с закрытым кодом, Вы могли бы дизассемблировать его 
или немного поэкспериментировать чтобы обнаружить пароль).

Единственный безопасный метод потребовал бы, чтобы Вы вводили мастер пароль каждый раз 
при запуске YajHFC, но по моему мнению это не было бы лучше по сравнению
с вводом ``настоящего'' пароля.


\subsection{Почему Вы выбрали такое дурацкое название?}

YajHFC начинался как проект для тестирования Java и библиотеки \texttt{gnu.hylafax} и, следовательно,
у него не было ``красивого'' названия. Поработав над ним какое то время, я заметил, что он оказался 
 действительно пригодным для использования, итак, я решил дать ему имя.
Так как в это же время я забавлялся с SuSE's yast, и знал, что
уже есть много других java hylafax клиентов, я просто назвал его
``\textbf{y}et \textbf{a}nother \textbf{J}ava \textbf{H}ylaFAX \textbf{c}lient''. 

\end{document}
